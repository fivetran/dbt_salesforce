name: 'salesforce_integration_tests_1'
version: '1.0.0'
config-version: 2

profile: 'integration_tests'

vars:

  salesforce_source:
    account: "{{ ref('sf_account_data') }}"
    opportunity: "{{ ref('sf_opportunity_data') }}"
    user: "{{ ref('sf_user_data') }}"
    user_role: "{{ ref('sf_user_role_data') }}"
    contact: "{{ ref('sf_contact_data') }}"
    lead: "{{ ref('sf_lead_data') }}"
    task: "{{ ref('sf_task_data') }}"
    event: "{{ ref('sf_event_data') }}"
    product_2: "{{ ref('sf_product_2_data') }}"
    order: "{{ ref('sf_order_data') }}"
    opportunity_line_item: "{{ ref('sf_opportunity_line_item_data') }}"
    salesforce_schema: salesforce_integration_tests_1

seeds:
  salesforce_source_integration_tests:
    +quote_columns: "{{ true if target.type in ('redshift', 'postgres') else false }}"
    +column_types:
      _fivetran_synced: timestamp
      _fivetran_active: boolean
    sf_account_data:
      +column_types:
        last_activity_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        annual_revenue: float
        billing_latitude: float
        billing_longitude: float
        shipping_latitude: float
        shipping_longitude: float
    sf_opportunity_data:
      +column_types:
        close_date: timestamp
        created_date: timestamp
        last_activity_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        amount: float
        probability: float
    sf_user_data:
      +column_types:
        last_login_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        offline_trial_expiration_date: timestamp
        latitude: float
        longitude: float
    sf_user_data:
      +column_types:
        last_login_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        offline_trial_expiration_date: timestamp
        latitude: float
        longitude: float
    sf_contact_data:
      +column_types:
        birthdate: timestamp
        created_date: timestamp
        email_bounced_date: timestamp
        last_activity_date: timestamp
        last_curequest_date: timestamp
        last_cuupdate_date: timestamp
        last_modified_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        system_modstamp: timestamp
        is_deleted: boolean
    sf_lead_data:
      +column_types:
        converted_date: timestamp
        created_date: timestamp
        email_bounced_date: timestamp
        last_activity_date: timestamp
        last_modified_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        system_modstamp: timestamp
        is_deleted: boolean
    sf_task_data:
      +column_types:
        activity_date: timestamp
        completed_date_time: timestamp
        created_date: timestamp
        last_modified_date: timestamp
        recurrence_end_date_only: timestamp
        recurrence_start_date_only: timestamp
        reminder_date_time: timestamp
        system_modstamp: timestamp
        is_deleted: boolean
    sf_event_data:
      +column_types:
        activity_date: timestamp
        activity_date_time: timestamp
        created_date: timestamp
        end_date: timestamp
        end_date_time: timestamp
        last_modified_date   : timestamp
        recurrence_2_pattern_start_date   : timestamp
        recurrence_end_date_only: timestamp
        recurrence_start_date_time: timestamp
        reminder_date_time: timestamp
        start_date_time: timestamp
        system_modstamp: timestamp
        is_deleted: boolean
    sf_product_2_data:
      +column_types:
        created_date: timestamp
        last_modified_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        system_modstamp: timestamp
        is_deleted: boolean
    sf_order_data:
      +column_types:
        activated_date: timestamp
        created_date: timestamp
        effective_date: timestamp
        end_date: timestamp
        last_modified_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        system_modstamp: timestamp
        is_deleted: boolean
    sf_opportunity_line_item_data:
      +column_types:
        created_date: timestamp
        last_modified_date: timestamp
        last_referenced_date: timestamp
        last_viewed_date: timestamp
        service_date: timestamp
        system_modstamp: timestamp
        is_deleted: boolean

dispatch:
  - macro_namespace: dbt_utils
    search_order: ['spark_utils', 'dbt_utils']

clean-targets:
    - target
    - dbt_modules